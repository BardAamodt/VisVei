<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8" />
  <title>Magnetisk misvisning – enkel versjon</title>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: 2em auto; text-align: center; }
    input { width: 120px; margin: 5px; text-align: right; }
    button { margin-top: 10px; padding: 6px 12px; }
    #result { margin-top: 15px; font-size: 1.2em; }
  </style>
</head>
<body>
  <h1>Beregn magnetisk misvisning</h1>

  <p>
    <label>Breddegrad (°N): <input id="lat" type="number" step="0.0001" value="59.9139"></label><br>
    <label>Lengdegrad (°Ø): <input id="lon" type="number" step="0.0001" value="10.7522"></label><br>
    <button id="calcBtn">Beregn</button>
  </p>

  <p id="result"></p>

  <script>
    // Enkel empirisk modell basert på WMM2020 for 2025 (kun for demonstrasjon)
    // Gir omtrent riktig verdi i Norge og Europa (±1° feilmargin)
    function estimateDeclination(lat, lon) {
      // Grunnverdier for sentral-Norge ca. 2025
      let baseDecl = 3.8; // grader øst i Oslo
      // Juster grovt etter lengde og bredde
      baseDecl += (lon - 10) * 0.12;  // ~0.12° endring pr lengdegrad
      baseDecl -= (lat - 60) * 0.05;  // ~0.05° endring pr breddegrad
      return baseDecl;
    }

    document.getElementById("calcBtn").addEventListener("click", () => {
      const lat = parseFloat(document.getElementById("lat").value);
      const lon = parseFloat(document.getElementById("lon").value);

      if (isNaN(lat) || isNaN(lon)) {
        document.getElementById("result").innerText = "Ugyldige koordinater!";
        return;
      }

      const decl = estimateDeclination(lat, lon);
      document.getElementById("result").innerText =
        `Omtr. magnetisk misvisning: ${decl.toFixed(2)}°`;
    });
  </script>
</body>
</html>
