<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8" />
  <title>Magnetisk misvisning (innebygd)</title>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: 2em auto; text-align: center; }
    input { width: 120px; margin: 5px; text-align: right; }
    button { margin-top: 10px; padding: 6px 12px; }
    #result { margin-top: 15px; font-size: 1.2em; }
  </style>
</head>
<body>
  <h1>Beregn magnetisk misvisning</h1>
  <p>
    <label>Breddegrad (°N): <input id="lat" type="number" step="0.0001" value="59.9139"></label><br />
    <label>Lengdegrad (°Ø): <input id="lon" type="number" step="0.0001" value="10.7522"></label><br />
    <button id="calcBtn">Beregn</button>
  </p>
  <p id="result"></p>

  <script>
    // Enkel, innebygd modell (forenklet WMM2025)
    // Dette er en lettvekts tilnærming med ~1° nøyaktighet for Europa
    function magneticDeclination(lat, lon) {
      // Referansepunkt (Oslo ~3.7° øst)
      let decl = 3.7;
      // Lengde påvirker mest
      decl += (lon - 10) * 0.13;
      // Bredde påvirker litt
      decl -= (lat - 60) * 0.06;
      // Nordlige områder litt mer østlig
      if (lat > 70) decl += 1;
      return decl;
    }

    document.getElementById("calcBtn").addEventListener("click", () => {
      const lat = parseFloat(document.getElementById("lat").value);
      const lon = parseFloat(document.getElementById("lon").value);
      if (isNaN(lat) || isNaN(lon)) {
        document.getElementById("result").innerText = "Ugyldige koordinater!";
        return;
      }
      const d = magneticDeclination(lat, lon);
      document.getElementById("result").innerText =
        `Omtr. magnetisk misvisning: ${d.toFixed(2)}°`;
    });
  </script>
</body>
</html>
